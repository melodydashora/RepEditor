# ===============================
# Vecto Pilot — .env.example
# Single-path triad: Claude (strategist) → GPT-5 (planner) → Gemini (validator)
# No fallbacks; explicit failure if any stage violates invariants.
# ===============================

# -------------------------------
# Security / Auth
# -------------------------------
AGENT_TOKEN=your_64_char_hex_token_here_generate_with_openssl_rand_hex_32
EIDOLON_TOKEN=your_64_char_hex_token_here_generate_with_openssl_rand_hex_32
ASSISTANT_OVERRIDE_TOKEN=your_64_char_hex_token_here_generate_with_openssl_rand_hex_32

# NEVER commit real API keys to *.example files — use placeholders only.
ANTHROPIC_API_KEY=your_anthropic_key_here
OPENAI_API_KEY=your_openai_key_here
GEMINI_API_KEY=your_gemini_key_here
PERPLEXITY_API_KEY=your_perplexity_key_here

# -------------------------------
# Processes / Ports / Paths
# -------------------------------
GATEWAY_PORT=5000              # Public gateway (serves client, proxies SDK)
EIDOLON_PORT=3101              # Internal Eidolon SDK
AGENT_PORT=43717               # Agent server (file/shell/sql)
BASE_DIR=/home/runner/workspace
STATE_DIR=${BASE_DIR}/data/state
SNAPSHOT_DIR=${BASE_DIR}/data/snapshots
CONTEXT_CACHE_DIR=${BASE_DIR}/data/cache

# -------------------------------
# Database
# -------------------------------
DATABASE_URL=postgres://user:pass@host:5432/dbname
PGSSLMODE=require

# -------------------------------
# Agent Server Capabilities (full access, explicit)
# -------------------------------
AGENT_BASE_URL=http://127.0.0.1:${AGENT_PORT}
AGENT_ALLOW_FS_READ=true
AGENT_ALLOW_FS_WRITE=true
AGENT_ALLOW_SHELL=true
AGENT_SHELL_WHITELIST=ls,cat,npm,node,git,psql,pg_dump,tar,sed,awk,find
AGENT_ALLOW_SQL_READ=true
AGENT_ALLOW_SQL_WRITE=true

# -------------------------------
# Assistant Override (full access, explicit)
# -------------------------------
ASSISTANT_OVERRIDE_MODE=true
ASSISTANT_BASE_URL=http://127.0.0.1:${AGENT_PORT}
ASSISTANT_ALLOW_FS_READ=true
ASSISTANT_ALLOW_FS_WRITE=true
ASSISTANT_ALLOW_SHELL=true
ASSISTANT_SHELL_WHITELIST=ls,cat,npm,node,git,psql,pg_dump,tar,sed,awk,find
ASSISTANT_ALLOW_SQL_READ=true
ASSISTANT_ALLOW_SQL_WRITE=true
ASSISTANT_PERSIST=true
ASSISTANT_POLICY_PATH=config/assistant-policy.json

# -------------------------------
# Eidolon Memory (full access, explicit)
# -------------------------------
EIDOLON_OVERRIDE_MODE=true
EIDOLON_BASE_URL=http://127.0.0.1:${AGENT_PORT}
EIDOLON_ALLOW_FS_READ=true
EIDOLON_ALLOW_FS_WRITE=true
EIDOLON_ALLOW_SHELL=true
EIDOLON_SHELL_WHITELIST=ls,cat,npm,node,git,psql,pg_dump,tar,sed,awk,find
EIDOLON_ALLOW_SQL_READ=true
EIDOLON_ALLOW_SQL_WRITE=true
EIDOLON_PERSIST=true
EIDOLON_POLICY_PATH=config/EIDOLON-policy.json

# Agent Override (Atlas) — Fallback chain for operational resilience
AGENT_OVERRIDE_ORDER=anthropic,openai,google
AGENT_OVERRIDE_API_KEYC=your_anthropic_key_for_atlas
AGENT_OVERRIDE_API_KEY5=your_openai_key_for_atlas
AGENT_OVERRIDE_API_KEYG=your_gemini_key_for_atlas
AGENT_OVERRIDE_CLAUDE_MODEL=claude-sonnet-4-5-20250929
AGENT_OVERRIDE_GPT5_MODEL=gpt-5
AGENT_OVERRIDE_GEMINI_MODEL=gemini-2.5-pro

# Memory backends and tables (long-lived, audited)
ASSISTANT_MEMORY_BACKEND=postgres
ASSISTANT_MEMORY_TABLE=assistant_memory
ASSISTANT_MEMORY_TTL_DAYS=365
ASSISTANT_MEMORY_COMPACTION_CRON=0 * * * *
EIDOLON_MEMORY_BACKEND=postgres
EIDOLON_MEMORY_TABLE=eidolon_memory
EIDOLON_MEMORY_SNAPSHOT_TABLE=eidolon_snapshots
EIDOLON_MEMORY_RETENTION_DAYS=365
EIDOLON_MAX_CONTEXT_TOKENS=200000
EIDOLON_MEMORY_COMPACTION_CRON=0 * * * *

# Optional file persistence (sidecar to DB)
EIDOLON_PERSIST_DIR=${STATE_DIR}/eidolon
ASSISTANT_PERSIST_DIR=${STATE_DIR}/assistant

# -------------------------------
# Models — EXACT 2025 IDs (single path only)
# -------------------------------
# Claude Sonnet 4.5 (strategist)
CLAUDE_MODEL=claude-sonnet-4-5-20250929
ANTHROPIC_BASE_URL=https://api.anthropic.com/v1
ANTHROPIC_VERSION=2023-06-01
ANTHROPIC_TEMPERATURE=0.2
ANTHROPIC_MAX_TOKENS=64000

# GPT-5 (planner) — reasoning_effort only; no temperature/top_p supported
OPENAI_MODEL=gpt-5
OPENAI_REASONING_EFFORT=high
OPENAI_MAX_COMPLETION_TOKENS=2048

# Google Gemini 2.5 Pro (validator/serializer)
GEMINI_MODEL=gemini-2.5-pro
GEMINI_MAX_OUTPUT_TOKENS=2048
GEMINI_TEMPERATURE=0.2
GEMINI_RESPONSE_MIME=application/json
GEMINI_SAFETY_BLOCK_NONE=true

# -------------------------------
# Single-Path Triad Control (no router, no fallbacks)
# -------------------------------
TRIAD_ENABLED=true
TRIAD_MODE=single_path
TRIAD_STRATEGIST_PROVIDER=anthropic
TRIAD_PLANNER_PROVIDER=openai
TRIAD_VALIDATOR_PROVIDER=google

# Strict invariants — FAIL (don’t reroute) if violated
TRIAD_FAIL_ON_INVALID=true
TRIAD_INVARIANT_NO_VENUE_INVENTION=true
TRIAD_INVARIANT_SCHEMA_STRICT=true
TRIAD_INVARIANT_WORD_CAPS=true

# Budgets (heavy reasoning but bounded; total budget honored)
LLM_TOTAL_BUDGET_MS=60000
CLAUDE_TIMEOUT_MS=8000
GPT5_TIMEOUT_MS=9000
GEMINI_TIMEOUT_MS=2000

# Policy loader timeouts (overrides defaults: GPT-5 120s, Gemini 20s)
# Set these if you want stricter hard caps than the policy defaults
# GPT5_TIMEOUT_MS=9000
# GEMINI_TIMEOUT_MS=2000

# -------------------------------
# Legacy Router (disable hedging & fallbacks entirely)
# -------------------------------
ROUTER_V2_ENABLED=false
PREFERRED_MODEL=claude-sonnet-4.5
FALLBACK_MODELS=gpt-5,gemini-2.5-pro

# -------------------------------
# Merged Strategy Endpoint (/api/blocks-merged or /api/blocks-triad)
# -------------------------------
PLANNER_DEADLINE_MS=9000
VALIDATOR_DEADLINE_MS=2000

# -------------------------------
# Replit + Environment Metadata
# -------------------------------
REPL_SLUG=${REPL_SLUG}
REPL_OWNER=${REPL_OWNER}
REPL_ID=${REPL_ID}

# ===============================
# Vecto Pilot — .env.example (GPT-5 ONLY)
# Single-path triad: GPT-5 (strategist → planner → validator)
# No fallbacks; fail closed on invariant violations.
# ===============================

# -------------------------------
# Security / Auth (placeholders only)
# -------------------------------
AGENT_TOKEN=your_64_char_hex_token_here_generate_with_openssl_rand_hex_32
EIDOLON_TOKEN=your_64_char_hex_token_here_generate_with_openssl_rand_hex_32
ASSISTANT_OVERRIDE_TOKEN=your_64_char_hex_token_here_generate_with_openssl_rand_hex_32
GW_KEY=your_gateway_key_here_generate_with_openssl_rand_hex_32

# NEVER commit real API keys to *.example files — placeholders only.
OPENAI_API_KEY=your_openai_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_ORG_ID=
OPENAI_PROJECT_ID=

# Perplexity (optional web research)
PERPLEXITY_API_KEY=your_perplexity_key_here
PERPLEXITY_MODEL=sonar-pro
PERPLEXITY_ENABLED=true
PERPLEXITY_MAX_TOKENS=4096
WEB_SEARCH_ENABLED=true

# -------------------------------
# Processes / Ports / Paths
# -------------------------------
GATEWAY_PORT=5000
EIDOLON_PORT=3101
AGENT_PORT=43717
BASE_DIR=/home/runner/workspace
STATE_DIR=${BASE_DIR}/data/state
SNAPSHOT_DIR=${BASE_DIR}/data/snapshots
CONTEXT_CACHE_DIR=${BASE_DIR}/data/cache

# -------------------------------
# Database
# -------------------------------
DATABASE_URL=postgres://user:pass@host:5432/dbname
PGSSLMODE=require

# -------------------------------
# Agent Server Capabilities (explicit)
# -------------------------------
AGENT_BASE_URL=http://127.0.0.1:${AGENT_PORT}
AGENT_ALLOW_FS_READ=true
AGENT_ALLOW_FS_WRITE=true
AGENT_ALLOW_SHELL=true
AGENT_SHELL_WHITELIST=ls,cat,npm,node,git,psql,pg_dump,tar,sed,awk,find
AGENT_ALLOW_SQL_READ=true
AGENT_ALLOW_SQL_WRITE=true

# -------------------------------
# Assistant Override (explicit)
# -------------------------------
ASSISTANT_OVERRIDE_MODE=true
ASSISTANT_BASE_URL=http://127.0.0.1:${AGENT_PORT}
ASSISTANT_ALLOW_FS_READ=true
ASSISTANT_ALLOW_FS_WRITE=true
ASSISTANT_ALLOW_SHELL=true
ASSISTANT_SHELL_WHITELIST=ls,cat,npm,node,git,psql,pg_dump,tar,sed,awk,find
ASSISTANT_ALLOW_SQL_READ=true
ASSISTANT_ALLOW_SQL_WRITE=true
ASSISTANT_PERSIST=true
ASSISTANT_POLICY_PATH=config/assistant-policy.json

# -------------------------------
# Eidolon Memory (explicit)
# -------------------------------
EIDOLON_OVERRIDE_MODE=true
EIDOLON_BASE_URL=http://127.0.0.1:${AGENT_PORT}
EIDOLON_ALLOW_FS_READ=true
EIDOLON_ALLOW_FS_WRITE=true
EIDOLON_ALLOW_SHELL=true
EIDOLON_SHELL_WHITELIST=ls,cat,npm,node,git,psql,pg_dump,tar,sed,awk,find
EIDOLON_ALLOW_SQL_READ=true
EIDOLON_ALLOW_SQL_WRITE=true
EIDOLON_PERSIST=true
EIDOLON_POLICY_PATH=config/eidolon-policy.json

# Memory backends and tables (audited)
ASSISTANT_MEMORY_BACKEND=postgres
ASSISTANT_MEMORY_TABLE=assistant_memory
ASSISTANT_MEMORY_TTL_DAYS=365
ASSISTANT_MEMORY_COMPACTION_CRON=0 * * * *
EIDOLON_MEMORY_BACKEND=postgres
EIDOLON_MEMORY_TABLE=eidolon_memory
EIDOLON_MEMORY_SNAPSHOT_TABLE=eidolon_snapshots
EIDOLON_MEMORY_RETENTION_DAYS=365
EIDOLON_MAX_CONTEXT_TOKENS=200000
EIDOLON_MEMORY_COMPACTION_CRON=0 * * * *

# Optional file persistence (sidecar to DB)
EIDOLON_PERSIST_DIR=${STATE_DIR}/eidolon
ASSISTANT_PERSIST_DIR=${STATE_DIR}/assistant

# -------------------------------
# Models — OpenAI-only (triad = GPT-5)
# -------------------------------
# Agent / Assistant defaults
AGENT_PROVIDER=openai
AGENT_MODEL=gpt-5
AGENT_TEMPERATURE=1.0
AGENT_MAX_OUTPUT_TOKENS=64000
AGENT_REASONING_MODE=extended     # maps to reasoning.effort=high

ASSISTANT_PROVIDER=openai
ASSISTANT_MODEL=gpt-5
ASSISTANT_TEMPERATURE=1.0
ASSISTANT_MAX_OUTPUT_TOKENS=64000
ASSISTANT_REASONING_MODE=extended

# Eidolon defaults
EIDOLON_PROVIDER=openai
EIDOLON_MODEL=gpt-5
EIDOLON_TEMPERATURE=1.0
EIDOLON_MAX_OUTPUT_TOKENS=64000
EIDOLON_REASONING_MODE=extended
EIDOLON_API_BASE=${OPENAI_BASE_URL}
EIDOLON_API_KEY=${OPENAI_API_KEY}

# -------------------------------
# Single-Path Triad Control (no router/fallbacks)
# -------------------------------
TRIAD_ENABLED=true
TRIAD_MODE=single_path

TRIAD_STRATEGIST_PROVIDER=openai
TRIAD_STRATEGIST_MODEL=gpt-5
TRIAD_STRATEGIST_TEMPERATURE=0.7
TRIAD_STRATEGIST_MAX_OUTPUT_TOKENS=32000
TRIAD_STRATEGIST_REASONING_MODE=extended

TRIAD_PLANNER_PROVIDER=openai
TRIAD_PLANNER_MODEL=gpt-5
TRIAD_PLANNER_TEMPERATURE=0.6
TRIAD_PLANNER_MAX_OUTPUT_TOKENS=64000
TRIAD_PLANNER_REASONING_MODE=extended

TRIAD_VALIDATOR_PROVIDER=openai
TRIAD_VALIDATOR_MODEL=gpt-5
TRIAD_VALIDATOR_TEMPERATURE=0.2
TRIAD_VALIDATOR_MAX_OUTPUT_TOKENS=8192
TRIAD_VALIDATOR_REASONING_MODE=low

# Strict invariants — FAIL (don't reroute) if violated
TRIAD_FAIL_ON_INVALID=true
TRIAD_INVARIANT_NO_VENUE_INVENTION=true
TRIAD_INVARIANT_SCHEMA_STRICT=true
TRIAD_INVARIANT_WORD_CAPS=true

# Budgets (bounded; total budget honored)
LLM_TOTAL_BUDGET_MS=60000
TRIAD_STRATEGIST_TIMEOUT_MS=8000
TRIAD_PLANNER_TIMEOUT_MS=9000
TRIAD_VALIDATOR_TIMEOUT_MS=2000

# -------------------------------
# Legacy Router (disabled; no hedging)
# -------------------------------
ROUTER_V2_ENABLED=false
PREFERRED_MODEL=gpt-5
FALLBACK_MODELS=

# -------------------------------
# Merged Strategy Endpoint
# -------------------------------
PLANNER_DEADLINE_MS=9000
VALIDATOR_DEADLINE_MS=2000

# -------------------------------
# Value Per Minute Ranking
# -------------------------------
VALUE_BASE_RATE_PER_MIN=1.00
VALUE_DEFAULT_TRIP_MIN=15
VALUE_DEFAULT_WAIT_MIN=0
VALUE_MIN_ACCEPTABLE_PER_MIN=0.50

# -------------------------------
# Feature flags (optional)
# -------------------------------
AGENT_UNRESTRICTED=true
AGENT_ML_RESEARCH_MODE=true
AGENT_ALLOW_PACKAGE_INSTALL=true
AGENT_ALLOW_DB_MIGRATIONS=true
AGENT_ALLOW_CONFIG_EDIT=true
AGENT_ALLOW_REPLIT_TOOLS=true
AGENT_ENHANCED_CONTEXT=true
AGENT_SEMANTIC_SEARCH=true
AGENT_AUTO_OPTIMIZE=true
ASSISTANT_FULL_ACCESS=true
EIDOLON_ENHANCED_MEMORY=true
RESEARCH_MODE_ENABLED=true
AUTO_PERFORMANCE_TUNING=true
ADVANCED_DEBUGGING=true
DEPLOYMENT_AUTOMATION=true

# -------------------------------
# Replit / Environment Metadata
# -------------------------------
REPL_SLUG=${REPL_SLUG}
REPL_OWNER=${REPL_OWNER}
REPL_ID=${REPL_ID}
